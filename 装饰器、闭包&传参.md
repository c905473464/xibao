#### 装饰器

在不改变函数内部代码和调用方式的前提下，为函数增加功能。

```python
# 装饰器  -- 不改变原来函数调用方式
def input_pas(func):
    def ret_fn():
        print('请输入密码···')
        func()
    return ret_fn  # 注意这里返回的是装饰器函数下的函数
@input_pas  # 用input_pas装饰器装饰了aa和bb函数
def aa():
    print('存钱')
@input_pas
def bb():
    print('取钱')
aa()  
bb()
# 输出
请输入密码···
存钱
请输入密码···
取钱
​```
```

```python
# 与装饰器不同的是python的闭包函数
def input_pas(func):
    def ret_fn():
        print('请输入密码···')
        func()
    return ret_fn
 
def aa():
    print('存钱')
def bb():
    print('取钱')
 
a = input_pas(aa)
b = input_pas(bb)
a() #  请输入密码···    存钱
b() #  请输入密码···     取钱
# 闭包函数：将aa函数和bb函数以参数形式传递到input_pas中，输入密码功能单独抽离出来，封装成了一个函数，并且以闭包的形式返回到外面。
# 好处: 减少代码冗余，高内聚
# 装饰器把上面的代码又精简了一下
```

#### 闭包

本质上来说，闭包将函数内部和函数外部链接起来。

闭包用起来就像是个函数样板，其中保留了一些稍后再去填入的空格

```python
#闭包函数，其中 exponent 称为自由变量
def nth_power(exponent):
    def exponent_of(base):
        return base ** exponent
    return exponent_of # 返回值是 exponent_of 函数
square = nth_power(2) # 计算一个数的平方
cube = nth_power(3) # 计算一个数的立方

print(square(2))  # 计算 2 的平方  # 4
print(cube(2)) # 计算 2 的立方  # 8
```

```python
# 若不使用闭包，计算一个数的平方
def nth_power_rewrite(base, exponent):
    return base ** exponent
res1 = nth_power_rewrite(base1, 2)
res2 = nth_power_rewrite(base2, 2)
res3 = nth_power_rewrite(base3, 2)
# 使用闭包，只需传递一个参数即可
square = nth_power(2)
res1 = square(base1)
res2 = square(base2)
res3 = square(base3)
```

```python
# 将上述闭包函数调用改写为装饰器   ???不会做
def nth_power(func):
    def res():
        func()
        return res
@ nth_power
def aa(base):
    a = base**2
    return a

aa(2)
```

#### *args, *kwargs

- *args表示不确定个数的arguments，一般是一个列表形式

- ```python
  def test1(*args):
      for i, item in enumerate(args):
          print(i, item)
  
  print("test:")
  test1('apple', 'banana', 'cabage')
  ```

- *kwargs表示不确定个数的key=argument形式

  ```python
  def test2(**kwargs):
      for key, parameter in kwargs.items():
          print(key, parameter)
  
  print("test:")
  test2(one='_one', two='_two')
  ```

  

